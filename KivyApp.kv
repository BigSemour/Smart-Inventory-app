#:import FadeTransition kivy.uix.screenmanager.FadeTransition

WindowManager:
    transition: FadeTransition()
    HomeWindow:
    SignUpWindow:
    LoginWindow:
    MainWindow:
    CreationWindow:
    ManualWindow:
    SelectionWindow:
    ProductWindow:
    EditWindow:

<HomeWindow>
    name: "home"
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'images/black_background_app.jpg'
    BoxLayout:
		orientation: "vertical"
		size: root.width, root.height
        padding: [0, 50]
		Label:
			text: "Smart Inventory\n\nManagement App"
			font_size: '25dp'
			color: 'white'
			font_name: "Roboto-Bold"

        GridLayout:
            cols: 2
            padding: [50, 70]
            spacing: [20, 0]
            Button:
                text: "Login"
                font_size: '20dp'
                size_hint: (.5, .3)
                pos_hint: {'center_x': .5, 'center_y': .5}
                background_color: 'gray'
                color: 'white'
                padding: [0, 50]
                font_name: "Roboto-Regular"
                on_release: root.manager.current = 'login'

            Button:
                text: "Sign Up"
                font_size: '20dp'
                size_hint: (.5, .3)
                pos_hint: {'center_x': .5, 'center_y': .5}
                background_color: 'red'
                color: 'white'
                font_name: "Roboto-Regular"
                on_release:
                    root.manager.transition.direction = 'right'
                    root.manager.current = 'signup'


<SignUpWindow>
    name: "signup"
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'images/black_background_app.jpg'
    BoxLayout:
		orientation: "vertical"
		size: root.width, root.height
        padding: [20, -20, 20, 50]
		Label:
			text: "Sign Up"
			font_size: '35dp'
			color: 'white'
            font_name: "Roboto-Bold"
        GridLayout:
            cols: 2
            rows: 3
            padding: [0, -20, 0, 20]
            spacing: [0, 10]
            Label:
                text: "First Name"
                font_size: '20dp'
                color: 'white'
                font_name: "Roboto-Bold"
            TextInput:
                id: firstname
                multiline: False
                font_size: '16dp'
            Label:
                text: "Last Name"
                font_size: '20dp'
                color: 'white'
                font_name: "Roboto-Bold"
            TextInput:
                id: lastname
                multiline: False
                font_size: '16dp'
            Label:
                text: "Email Address"
                font_size: '20dp'
                color: 'white'
                font_name: "Roboto-Bold"
            TextInput:
                id: email
                multiline: False
                font_size: '16dp'
        GridLayout:
            rows: 2
            cols: 2
            padding: [0, 10, 0, 20]
            spacing: [0, 10]
            Label:
                text: "Username"
                font_size: '20dp'
                color: 'white'
                font_name: "Roboto-Bold"
            TextInput:
                id: username
                multiline: False
                font_size: '16sp'
            Label:
                text: "Password"
                font_size: '20dp'
                color: 'white'
                font_name: "Roboto-Bold"
            TextInput:
                id: password_text
                multiline: False
                font_size: '16dp'
                password: True
                password_mask: '*'
        GridLayout:
            cols: 2
            padding: [0, 0, 0, 0]
            spacing: [20, 0]
            Button:
                text: "Back"
                font_size: '20dp'
                size_hint: (.5, .3)
                pos_hint: {'center_x': .5, 'center_y': .5}
                background_color: 'gray'
                color: 'white'
                padding: [0, 50]
                font_name: "Roboto-Regular"
                on_release: root.manager.current = 'home'

            Button:
                text: "Sign Up"
                font_size: '20dp'
                size_hint: (.5, .3)
                pos_hint: {'center_x': .5, 'center_y': .5}
                background_color: 'red'
                color: 'white'
                font_name: "Roboto-Regular"
                on_release:
                    root.manager.transition.direction = 'right'
                    root.on_release_button()







<LoginWindow>
    name: "login"
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'images/black_background_app.jpg'
    BoxLayout:
		orientation: "vertical"
		size: root.width, root.height
        padding: [50, 50]
		Label:
			text: "Login"
			font_size: '35dp'
			color: 'white'
            font_name: "Roboto-Bold"

        GridLayout:
            rows: 2
            cols: 2
            padding: [0, 40, 0, 50]
            spacing: [0, 10]
            Label:
                text: "Username"
                font_size: '20dp'
                color: 'white'
                font_name: "Roboto-Bold"
            TextInput:
                id: username_login
                multiline: False
                font_size: '16dp'
                text: ''
            Label:
                text: "Password"
                font_size: '20dp'
                color: 'white'
                font_name: "Roboto-Bold"
            TextInput:
                id: password_login
                multiline: False
                font_size: '16dp'
                text: ''
                password: True
                password_mask: '*'
        GridLayout:
            cols: 2
            padding: [0, 20, 0, 50]
            spacing: [20, 0]
            Button:
                text: "Back"
                font_size: '20dp'
                size_hint: (.5, .3)
                pos_hint: {'center_x': .5, 'center_y': .5}
                background_color: 'gray'
                color: 'white'
                padding: [0, 50]
                font_name: "Roboto-Regular"
                on_release: root.manager.current = 'home'

            Button:
                text: "Login"
                font_size: '20dp'
                size_hint: (.5, .3)
                pos_hint: {'center_x': .5, 'center_y': .5}
                background_color: 'red'
                color: 'white'
                font_name: "Roboto-Regular"
                on_release:
                    root.manager.transition.direction = 'right'
                    root.on_release_button()




<MainWindow>
    name: "main"
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'images/black_background_app.jpg'
    RelativeLayout:
        size_hint: None, None
        size: 120, 50
        pos_hint: {'right': 1, 'top': 1}
        Button:
            text: "Logout"
            font_size: '25dp'
            font_name: "Roboto-Bold"
            size_hint: (1.12, 1.1)
            background_color: 'red'
            color: 'white'
            on_release:
                root.manager.transition.direction = 'left'
                root.on_logout_button()

    BoxLayout:
		orientation: "vertical"
		size: root.width, root.height
        padding: [0, 50]


		Label:
			id: welcome
			font_size: '25dp'
			color: 'white'
			font_name: "Roboto-Bold"




		GridLayout:
			cols:2
            padding: [0, 50]
			Label:
				text: "Create List"
				font_size:'22dp'
			    font_name: 'Roboto-Regular'

			CheckBox:
				group: "Actions"
				on_active: root.checkbox_click(self, self.active, "Create List")

			Label:
				text: "Edit List"
				font_size:'22dp'
			    font_name: 'Roboto-Regular'
			CheckBox:
				group: "Actions"
				on_active: root.checkbox_click(self, self.active, "Edit List")

			Label:
				text: "Stock Prediction"
				font_size:'22dp'
			    font_name: 'Roboto-Regular'
			CheckBox:
				group: "Actions"
				on_active: root.checkbox_click(self, self.active, "Stock Prediction")

		Button:
			text: "Submit"
			font_size:'25dp'
			font_name: 'Roboto-Regular'
			size_hint: (.5, .3)
			pos_hint: {'center_x': .5, 'center_y': .5}
			background_color: 'red'
			color: 'white'
			on_press:
			    root.manager.transition.direction = 'left'
			    root.on_press_button()

<CreationWindow>
    name: "creation"
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'images/black_background_app.jpg'
    RelativeLayout:
        size_hint: None, None
        size: 120, 50
        pos_hint: {'right': 1, 'top': 1}
        Button:
            text: "Logout"
            font_size: '25dp'
            font_name: "Roboto-Bold"
            size_hint: (1.12, 1.1)
            background_color: 'red'
            color: 'white'
            on_release:
                root.manager.transition.direction = 'left'
                root.on_logout_button()
    BoxLayout:
		orientation: "vertical"
		size: root.width, root.height
        padding: [0, 40]
		Label:
			text: "Add List"
			font_size:'35dp'
			color: 'white'
			padding: [0, 50]
			font_name: 'Roboto-Bold'

        GridLayout:
			cols:2
            padding: [50, 65]
            spacing: [10, 0]
            Label:
                text: "Enter List Name"
                font_size: '20dp'

            TextInput:
                id: category
                multiline: False
                font_size: '20dp'

        GridLayout:
            cols: 2
            padding: [50, 50]
            spacing: [20, 0]
            Button:
                text: "Back"
                font_size: '25dp'
                size_hint: (.5, .3)
                pos_hint: {'center_x': .5, 'center_y': .5}
                background_color: 'grey'
                color: 'white'
                on_release:
                    root.manager.transition.direction = 'right'
                    root.manager.current = 'main'

            Button:
                text: "Add"
                font_size:'25dp'
                size_hint: (.5, .3)
                pos_hint: {'center_x': .5, 'center_y': .5}
                background_color: 'red'
                color: 'white'
                padding: [0, 50]
                on_release: root.on_release_button()



<ManualWindow>
    name: "manualform"
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'images/black_background_app.jpg'
    RelativeLayout:
        size_hint: None, None
        size: 120, 50
        pos_hint: {'right': 1, 'top': 1}
        Button:
            text: "Logout"
            font_size: '25dp'
            font_name: "Roboto-Bold"
            size_hint: (1.12, 1.1)
            background_color: 'red'
            color: 'white'
            on_release:
                root.manager.transition.direction = 'left'
                root.on_logout_button()
    BoxLayout:
		orientation: "vertical"
		size: root.width, root.height
		padding: [0, 50]

		Label:
			text: "Manually Add Details"
			font_size:'25dp'
			color: 'white'
			font_name: 'Roboto-Bold'

        GridLayout:
			cols:2
			padding: [50, 40]
			spacing: [30, 0]

            Label:
                text: "Enter Object Name"
                font_size: '20dp'

            TextInput:
                id: newName
                multiline: False
                font_size: '18dp'
        GridLayout:
            cols: 2
            padding: [50, 40]
            spacing: [30, 0]

            Label:
                text: "Enter Object Price"
                font_size: '20dp'

            TextInput:
                id: newPrice
                multiline: False
                font_size: '18dp'
        GridLayout:
            cols: 2
            padding: [50, 40]
            spacing: [20, 0]
            Button:
                text: "Back"
                font_size: '20dp'
                size_hint: (.5, .3)
                pos_hint: {'center_x': .5, 'center_y': .5}
                background_color: 'gray'
                color: 'white'
                padding: [0, 50]
                font_name: "Roboto-Regular"
                on_release: root.manager.current = 'product'
            Button:
                text: "Submit"
                font_size:'20dp'
                size_hint: (.5, .3)
                pos_hint: {'center_x': .5, 'center_y': .5}
                background_color: 'red'
                color: 'white'
                on_release:
                    root.barcode_data = root.manager.get_screen("product").barcode_data
                    root.on_release_button()


<SelectionWindow>:
    name: "selection"

    __safe_id: [drop_content.__self__]
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'images/black_background_app.jpg'
    RelativeLayout:
        size_hint: None, None
        size: 120, 50
        pos_hint: {'right': 1, 'top': 1}
        Button:
            text: "Logout"
            font_size: '25dp'
            font_name: "Roboto-Bold"
            size_hint: (1.12, 1.1)
            background_color: 'red'
            color: 'white'
            on_release:
                root.manager.transition.direction = 'left'
                root.on_logout_button()
    BoxLayout:
		orientation: "vertical"
		size: root.width, root.height
		padding: [0, 50]

		Label:
		    text: "Selection List to Edit"
			font_size:'25dp'
			color: 'white'
        GridLayout:
			cols:2
			padding: [50, 55]

            Button:
                pos_hint:{'center_x': .5, 'center_y': .5}
                id: drop_cat_menu
                text: 'Select List'
                size_hint_y: None
                background_color: 'red'
                color: 'white'
                height: 44
                on_parent: drop_content.dismiss()
                on_release: drop_content.open(self)

            CustomDropDown:
                id: drop_content
                # on_parent: self.dismiss()
                bar_width: 10
                effect_cls: "ScrollEffect"
                scroll_type: ['bars']
                bar_color: [1, 0, 0, 1]     # red color
                bar_inactive_color: [0, 0, 1, 1]    # blue color
                max_height: 120
                on_select:
                    drop_content.text = f'{args[1]}'
                    root.manager.category = drop_content.text
                    root.manager.current = 'edit'



        GridLayout:
            cols: 1
            rows: 1
            padding: [50, 55]

            Button:
                text: "Back"
                background_color: 'red'
                color: 'white'
                on_release:
                    root.manager.transition.direction = 'right'
                    root.manager.current = 'main'


<ProductWindow>:
    name: "product"
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'images/black_background_app.jpg'
    RelativeLayout:
        size_hint: None, None
        size: 120, 50
        pos_hint: {'right': 1, 'top': 1}
        Button:
            text: "Logout"
            font_size: '25dp'
            font_name: "Roboto-Bold"
            size_hint: (1.12, 1.1)
            background_color: 'red'
            color: 'white'
            on_release:
                root.manager.transition.direction = 'left'
                root.on_logout_button()
    BoxLayout:
		orientation: "vertical"
		size: root.width, root.height
		padding: [0, 50]

        Label:
			text: "Add Product"
			font_size:'35dp'
			color: 'white'
			padding: [0, 50]
			font_name: 'Roboto-Regular'

        GridLayout:
			rows:3
            padding: [50, 0]
            spacing: [10, 20]
            Label:
                text: "Enter UPC Number"
                font_size: '25dp'
			    font_name: 'Roboto-Regular'

            TextInput:
                id: barcode
                multiline: False
                font_size: '20dp'
			    font_name: 'Roboto-Regular'

            Button:
                text: "Submit"
                font_size: '25dp'
			    font_name: 'Roboto-Regular'
                size_hint: (.5, .7)
                pos_hint: {'center_x': .5, 'center_y': .5}
                background_color: 'red'
                color: 'white'
                padding: [0, 50]
                on_release:
                    root.on_release_button()

        GridLayout:
            cols: 2
            padding: [50, 50]
            spacing: [20, 0]
            Button:
                text: "Back"
                font_size: '25dp'
                font_name: 'Roboto-Regular'
                size_hint: (.5, .3)
                pos_hint: {'center_x': .5, 'center_y': .5}
                background_color: 'gray'
                color: 'white'
                on_release:
                    root.manager.transition.direction = 'right'
                    root.manager.current = 'main'

            Button:
                text: "Launch\nCamera"
                font_size:'25dp'
                font_name: 'Roboto-Regular'
                size_hint: (.5, .7)
                pos_hint: {'center_x': .5, 'center_y': .5}
                background_color: 'red'
                color: 'white'
                padding: [0, 50]
                on_release: root.launch_camera()



<EditWindow>
    name: "edit"
    __safe_id: [new_rv.__self__]
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'images/black_background_app.jpg'
    GridLayout:
        rows: 4
        cols: 1
        RelativeLayout:
            size_hint: None, None
            size: 120, 50
            pos_hint: {'right': 1, 'top': 1}
            padding: [0, 50]
            Button:
                text: "Logout"
                font_size: '25dp'
                font_name: "Roboto-Bold"
                size_hint: (1.12, 1.1)
                background_color: 'red'
                color: 'white'
                on_release:
                    root.manager.transition.direction = 'left'
                    root.on_logout_button()
        GridLayout:
            cols: 1
            rows: 1
            size_hint_y: .1
            Label:
                text: root.manager.category
                font_size: 36
                font_name: 'Roboto-Bold'
        GridLayout:
            id: rv
            cols: 1
            rows: 1

#            size_hint: 1, None
            size_hint_y: .7
            RV:
                id: new_rv
        GridLayout:
            cols: 4
            rows: 1
            size_hint_y: .2
            Button:
                text: 'Back'
                background_color: 'red'
                id: back
                on_release: root.manager.current = "main"
            Button:
                text: 'Delete'
            Button:
                text: 'Add'
            Button:
                text: 'Edit'
                id: edit



<SelectableLabel>:
    id: label_id
    # Draw a background to indicate selection
    canvas.before:
        Color:
            rgba: (.0, 0.9, .1, .3) if self.selected else (0, 0, 0, 1)
        Rectangle:
            pos: self.pos
            size: self.size
    font_size: 12

<RV>:
    viewclass: 'SelectableLabel'
    __safe_id: [child_rv.__self__]
    bar_width: 16
    do_scroll_x: True
    do_scroll_y: True
    SelectableRecycleBoxLayout:
        id: child_rv
        default_size: dp(1000), dp(56)
        default_size_hint: None, None
        size_hint_y: None
        size_hint_x: None
        pos_hint_y: None
        pos_hint_x: None
        height: self.minimum_height
        width: self.minimum_width
        orientation: 'vertical'
        multiselect: False
        touch_multiselect: False




<ErrorPopup>:
    size_hint: .5 , .5
    auto_dismiss: False
    title: "ERROR"
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: "There has been an Error"
        Button:
            text: "Close"
            on_press: root.dismiss()
<SignupErrorPopup>:
    size_hint: .5 , .5
    auto_dismiss: False
    title: "Sign Up ERROR"
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: "There has been an Error. All Fields are Required!!"
        Button:
            text: "Close"
            on_press: root.dismiss()

<SignUpSuccessPopup>:
    size_hint: .5 , .5
    auto_dismiss: False
    title: "Sign Up Success"
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: "You have been successfully Signed Up"
        Button:
            text: "Close"
            on_press: root.dismiss()

<SuccessPopup>:
    size_hint: .5 , .5
    auto_dismiss: False
    title: "Success"
    BoxLayout:
        orientation: 'vertical'
        Label:
            id: success_label
            text: "That was a success"
        Button:
            text: "Close"
            on_press: root.dismiss()

<ExistsPopup>:
    size_hint: .5 , .5
    auto_dismiss: False
    title: "Already Exists"
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: "This UPC already exists"
        Button:
            text: "Close"
            on_press: root.dismiss()

<UsernameErrorPopup>:
    size_hint: .5 , .5
    auto_dismiss: False
    title: "Username does not exists"
    BoxLayout:
        orientation: 'vertical'
        Label:
            id: username
            text: "This Username already exists"
        Button:
            text: "Close"
            on_press: root.dismiss()

<PasswordErrorPopup>:
    size_hint: .5 , .5
    auto_dismiss: False
    title: "Password was wrong"
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: "This Password is incorrect"
        Button:
            text: "Close"
            on_press: root.dismiss()